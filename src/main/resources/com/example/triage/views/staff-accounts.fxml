<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.example.triage.controllers.StaffAccountsController"
            style="-fx-background-color: #f5f7fa;">

    <center>
        <StackPane fx:id="staffStack">

            <!-- ================= MAIN CONTENT ================= -->
            <VBox spacing="20"
                  VBox.vgrow="ALWAYS"
                  style="-fx-padding: 20;">

                <!-- ON-SHIFT STAFF -->
                <VBox spacing="12"
                      style="-fx-background-color: #ffffff;
                             -fx-background-radius: 16;
                             -fx-padding: 20;
                             -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 15, 0, 0, 3);">

                    <Label text="On-Shift Staff"
                           style="-fx-font-size: 18px;
                                  -fx-font-weight: bold;
                                  -fx-text-fill: #034c81;" />

                    <FlowPane fx:id="onShiftContainer"
                              hgap="12"
                              vgap="12"
                              prefHeight="150"
                              style="-fx-background-color: #f8f9fa;
                                     -fx-background-radius: 10;
                                     -fx-padding: 15;" />
                </VBox>

                <!-- ALL STAFF -->
                <VBox spacing="14"
                      VBox.vgrow="ALWAYS"
                      style="-fx-background-color: #ffffff;
                             -fx-background-radius: 16;
                             -fx-padding: 20;
                             -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 15, 0, 0, 3);">

                    <Label text="All Staff"
                           style="-fx-font-size: 18px;
                                  -fx-font-weight: bold;
                                  -fx-text-fill: #034c81;" />

                    <!-- ================= TABLE HEADER ================= -->
                    <GridPane style="-fx-background-color: #f8f9fa;
                 -fx-border-color: #e0e0e0;
                 -fx-border-width: 0 0 1 0;">

                        <columnConstraints>
                            <ColumnConstraints prefWidth="50"/>
                            <ColumnConstraints percentWidth="42"/>
                            <ColumnConstraints percentWidth="18"/>
                            <ColumnConstraints percentWidth="22"/>
                            <ColumnConstraints percentWidth="10"/>
                        </columnConstraints>

                        <StackPane GridPane.columnIndex="0"
                                   style="-fx-padding:10;
                      -fx-border-color:#e0e0e0;
                      -fx-border-width:0 1 0 0;">
                            <Label text="âœ“" style="-fx-text-fill:#7f858c;" />
                        </StackPane>

                        <StackPane GridPane.columnIndex="1"
                                   alignment="CENTER_LEFT"
                                   style="-fx-padding:10;
                      -fx-border-color:#e0e0e0;
                      -fx-border-width:0 1 0 0;">
                            <Label text="Name" style="-fx-font-weight:bold;" />
                        </StackPane>

                        <StackPane GridPane.columnIndex="2"
                                   alignment="CENTER"
                                   style="-fx-padding:10;
                      -fx-border-color:#e0e0e0;
                      -fx-border-width:0 1 0 0;">
                            <Label text="Role" style="-fx-font-weight:bold;" />
                        </StackPane>

                        <StackPane GridPane.columnIndex="3"
                                   alignment="CENTER"
                                   style="-fx-padding:10;
                      -fx-border-color:#e0e0e0;
                      -fx-border-width:0 1 0 0;">
                            <Label text="Facility" style="-fx-font-weight:bold;" />
                        </StackPane>

                        <StackPane GridPane.columnIndex="4"
                                   alignment="CENTER"
                                   style="-fx-padding:10;">
                            <Label text="On Shift" style="-fx-font-weight:bold;" />
                        </StackPane>
                    </GridPane>

                    <!-- ================= TABLE BODY ================= -->
                    <ScrollPane fitToWidth="true"
                                VBox.vgrow="ALWAYS"
                                style="-fx-background-color: transparent;">

                        <content>
                            <VBox fx:id="staffRows"
                                  spacing="6"
                                  style="-fx-padding: 8 0 8 0;" />
                        </content>
                    </ScrollPane>

                    <HBox spacing="12" alignment="CENTER_LEFT">

                        <!-- ADD STAFF -->
                        <Button text="+ Add Staff"
                                prefHeight="38"
                                onAction="#showAddStaffPopup"
                                style="
                -fx-background-color: linear-gradient(to right, #2ca3fa, #5ba2f4);
                -fx-text-fill: white;
                -fx-font-size: 13px;
                -fx-font-weight: bold;
                -fx-background-radius: 10;
                -fx-padding: 0 16;
                -fx-cursor: hand;
                -fx-effect: dropshadow(gaussian, rgba(44,163,250,0.3), 8, 0, 0, 2);
            "/>

                        <!-- EDIT STAFF -->
                        <Button fx:id="editStaffBtn"
                                text="Edit Staff"
                                prefHeight="38"
                                onAction="#handleEditStaff"
                                disable="true"
                                style="
                -fx-background-color: transparent;
                -fx-text-fill: #034c81;
                -fx-font-size: 13px;
                -fx-font-weight: bold;
                -fx-border-color: #d0d7de;
                -fx-border-radius: 10;
                -fx-background-radius: 10;
                -fx-padding: 0 16;
                -fx-cursor: hand;
            "/>

                        <!-- DELETE STAFF -->
                        <Button text="Delete Selected"
                                prefHeight="38"
                                onAction="#showDeleteConfirmPopup"
                                style="
                -fx-background-color: transparent;
                -fx-text-fill: #d32f2f;
                -fx-font-size: 13px;
                -fx-font-weight: bold;
                -fx-border-color: #f1b0b7;
                -fx-border-radius: 10;
                -fx-background-radius: 10;
                -fx-padding: 0 16;
                -fx-cursor: hand;
            "/>
                    </HBox>

                </VBox>
            </VBox>

            <!-- ================= BACKDROP ================= -->
            <Pane fx:id="staffBackdrop"
                  visible="false"
                  managed="false"
                  style="-fx-background-color: rgba(0,0,0,0.35);"
                  StackPane.alignment="CENTER"/>

            <VBox fx:id="addStaffPopup"
                  visible="false"
                  managed="false"
                  spacing="15"
                  prefWidth="420"
                  maxWidth="420"
                  style="
        -fx-background-color: white;
        -fx-background-radius: 16;
        -fx-padding: 25;
        -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.25), 20, 0, 0, 5);
      "
                  StackPane.alignment="CENTER">

                <Label text="Add Staff"
                       style="-fx-font-size: 18px;
                  -fx-font-weight: bold;
                  -fx-text-fill: #034c81;" />

                <TextField fx:id="addNameField"
                           promptText="Full Name"/>

                <ComboBox fx:id="addRoleBox"
                          promptText="Select Role"/>

                <ComboBox fx:id="addFacilityBox"
                          promptText="Select Facility"/>

                <ComboBox fx:id="addFloorBox"
                          promptText="Select Floor"/>

                <HBox spacing="10" alignment="CENTER_RIGHT">
                    <Button text="Cancel"
                            onAction="#hideAllPopups"/>

                    <Button text="Add Staff"
                            onAction="#confirmAddStaff"/>
                </HBox>
            </VBox>


            <!-- ================= EDIT STAFF POPUP ================= -->
            <VBox fx:id="editStaffPopup"
                  visible="false"
                  managed="false"
                  spacing="15"
                  prefWidth="420"
                  maxWidth="420"
                  style="
        -fx-background-color: white;
        -fx-background-radius: 16;
        -fx-padding: 25;
        -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.25), 20, 0, 0, 5);
      "
                  StackPane.alignment="CENTER">

                <Label text="Edit Staff"
                       style="-fx-font-size: 18px;
                  -fx-font-weight: bold;
                  -fx-text-fill: #034c81;" />

                <ComboBox fx:id="editRoleBox"
                          promptText="Select Role"/>

                <ComboBox fx:id="editFacilityBox"
                          promptText="Select Facility"/>

                <ComboBox fx:id="editFloorBox"
                          promptText="Select Floor"/>

                <HBox spacing="10" alignment="CENTER_RIGHT">
                    <Button text="Cancel"
                            onAction="#hideAllPopups"/>

                    <Button text="Save"
                            onAction="#confirmEditStaff"/>
                </HBox>
            </VBox>


            <!-- ================= DELETE CONFIRM POPUP ================= -->
            <VBox fx:id="deleteConfirmPopup"
                  visible="false"
                  managed="false"
                  spacing="15"
                  prefWidth="320"
                  maxWidth="320"
                  style="
        -fx-background-color: white;
        -fx-background-radius: 16;
        -fx-padding: 25;
        -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.25), 20, 0, 0, 5);
      "
                  StackPane.alignment="CENTER">

                <Label text="Delete selected staff?"
                       style="-fx-font-size: 16px;
                  -fx-font-weight: bold;" />

                <HBox spacing="10" alignment="CENTER_RIGHT">
                    <Button text="Cancel"
                            onAction="#hideAllPopups"/>

                    <Button text="Delete"
                            onAction="#confirmDeleteStaff"/>
                </HBox>
            </VBox>


        </StackPane>
    </center>
</BorderPane>

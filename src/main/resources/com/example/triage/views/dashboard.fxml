<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.example.triage.controllers.DashboardController"
            stylesheets="@dashboard.css">

    <!-- TOP BAR -->
    <top>
        <HBox prefHeight="50" style="-fx-background-color: #34495E;">
            <Button fx:id="menuButton"
                    onAction="#toggleSidebar"
                    style="-fx-background-color: transparent;">
                <graphic>
                    <FontIcon iconLiteral="fas-bars" iconSize="24" iconColor="white"/>
                </graphic>
            </Button>

            <Label fx:id="titleLabel"
                   text="Dashboard"
                   style="-fx-text-fill: white; -fx-font-size: 20px; -fx-font-weight: bold;" />
        </HBox>
    </top>

    <!-- CENTER AREA -->
    <center>
        <StackPane fx:id="contentWrapper">

            <BorderPane fx:id="contentArea"
                        style="-fx-background-color: #ECF0F1;" />

            <Pane fx:id="overlay"
                  visible="false"
                  style="-fx-background-color: rgba(0,0,0,0.4);" />

            <VBox fx:id="logoutPanel"
                  visible="false"
                  managed="false"
                  alignment="CENTER"
                  spacing="14"

                  prefWidth="360"
                  maxWidth="360"

                  prefHeight="200"
                  maxHeight="200"

                  style="
          -fx-background-color: white;
          -fx-padding: 24;
          -fx-background-radius: 12;
          -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.25), 20, 0, 0, 4);
      "
                  StackPane.alignment="CENTER">

                <Label text="Confirm Logout"
                       style="-fx-font-size: 18px; -fx-font-weight: bold;" />

                <Label text="Are you sure you want to log out?"
                       style="-fx-text-fill: #555;" />

                <HBox spacing="10" alignment="CENTER">
                    <Button text="Cancel"
                            onAction="#cancelLogout"/>

                    <Button text="Logout"
                            style="-fx-background-color: #E74C3C; -fx-text-fill: white;"
                            onAction="#performLogout"/>
                </HBox>

            </VBox>

            <VBox fx:id="sidebar"
                  prefWidth="200"
                  maxWidth="200"
                  minWidth="200"
                  style="-fx-background-color: #2C3E50;"
                  StackPane.alignment="CENTER_LEFT">

                <Label text="Menu"
                       style="-fx-text-fill: white; -fx-font-size: 22px;
                              -fx-font-weight: bold; -fx-padding: 20 0 10 20;" />

                <HBox fx:id="itemDashboard" styleClass="menu-item">
                    <Label text="Dashboard" styleClass="menu-text"/>
                </HBox>

                <HBox fx:id="itemStaff" styleClass="menu-item">
                    <Label text="Staff Accounts" styleClass="menu-text"/>
                </HBox>

                <HBox fx:id="itemPatients" styleClass="menu-item">
                    <Label text="Patients" styleClass="menu-text"/>
                </HBox>

                <HBox fx:id="itemFacilities" styleClass="menu-item">
                    <Label text="Facilities" styleClass="menu-text"/>
                </HBox>

                <HBox fx:id="itemSettings" styleClass="menu-item">
                    <Label text="Settings" styleClass="menu-text"/>
                </HBox>

                <HBox fx:id="itemLogout"
                      styleClass="menu-item"
                      onMouseClicked="#handleLogout">
                    <Label text="Logout" styleClass="menu-text"/>
                </HBox>

            </VBox>
        </StackPane>
    </center>
</BorderPane>